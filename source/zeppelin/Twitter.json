{
    "paragraphs": [
        {
            "text": "%dep\n// Load the spark-hbase connector\nz.reset()\nz.load(\"it.nerdammer.bigdata:spark-hbase-connector_2.10:1.0.3\")",
            "dateUpdated": "2017-01-23T12:12:36+0000",
            "config": {
                "colWidth": 12,
                "editorMode": "ace/mode/scala",
                "tableHide": false,
                "graph": {
                    "mode": "table",
                    "height": 300,
                    "optionOpen": false,
                    "keys": [],
                    "values": [],
                    "groups": [],
                    "scatter": {}
                },
                "enabled": true
            },
            "settings": {
                "params": {
                    "formName": ""
                },
                "forms": {}
            },
            "jobName": "paragraph_1485173544514_-983865169",
            "id": "20170122-150206_147323569",
            "dateCreated": "2017-01-23T12:12:24+0000",
            "status": "FINISHED",
            "errorMessage": "",
            "progressUpdateIntervalMs": 500,
            "$$hashKey": "object:161",
            "dateFinished": "2017-01-23T12:13:30+0000",
            "dateStarted": "2017-01-23T12:12:37+0000",
            "focus": true
        },
        {
            "text": "%spark\nimport it.nerdammer.spark.hbase._\nimport org.apache.spark.sql._\nimport org.apache.spark.sql.types._\n// Initialize HBase config\nsc.hadoopConfiguration.set(\"spark.hbase.host\", \"localhost\")\n\n// HBase schema\nval schema = StructType(Array(\n        StructField(\"id\", StringType),\n        StructField(\"user_name\", StringType),\n        StructField(\"tweet_created_at\", StringType),\n        StructField(\"tweet_text\", StringType),\n        StructField(\"feeling_level\", IntegerType),\n        StructField(\"feeling_error\", StringType)))\n\ndef toInt(in: Option[String]) : Int = {\n    in match {\n        case Some(s) => s.toInt\n        case None => 0\n    }\n}\n\n// Utility to import HBase tables as Spark SQL tables\ndef importHBaseTable(tableName : String) {\n    val hBaseRDD = sc.hbaseTable[(String, Option[String], Option[String], Option[String], Option[String], Option[String])](tableName).select(\"user:name\", \"tweet:created_at\", \"tweet:text\", \"feeling:level\", \"feeling:error\")\n    val rowRDD = hBaseRDD.map(i => Row(i._1, i._2, i._3, i._4, toInt(i._5), i._6))\n    sqlContext.createDataFrame(rowRDD, schema).registerTempTable(tableName)\n}\n\nimportHBaseTable(\"paris_tweets\")\nimportHBaseTable(\"london_tweets\")\nimportHBaseTable(\"nyc_tweets\")",
            "dateUpdated": "2017-01-23T12:17:05+0000",
            "config": {
                "colWidth": 12,
                "editorMode": "ace/mode/scala",
                "tableHide": false,
                "graph": {
                    "mode": "table",
                    "height": 300,
                    "optionOpen": false,
                    "keys": [],
                    "values": [],
                    "groups": [],
                    "scatter": {}
                },
                "enabled": true
            },
            "settings": {
                "params": {},
                "forms": {}
            },
            "jobName": "paragraph_1485173544517_-986558411",
            "id": "20170122-150536_1837894210",
            "dateCreated": "2017-01-23T12:12:24+0000",
            "status": "FINISHED",
            "errorMessage": "",
            "progressUpdateIntervalMs": 500,
            "$$hashKey": "object:162",
            "focus": true,
            "dateFinished": "2017-01-23T12:17:11+0000",
            "dateStarted": "2017-01-23T12:17:05+0000"
        },
        {
            "text": "%sql\nSELECT from_unixtime(tweet_created_at / 1000, 'YYYY-MM-dd HH:mm') AS date, AVG(feeling_level) AS level FROM paris_tweets GROUP BY from_unixtime(tweet_created_at / 1000, 'YYYY-MM-dd HH:mm')",
            "dateUpdated": "2017-01-23T12:18:40+0000",
            "config": {
                "colWidth": 12,
                "editorMode": "ace/mode/sql",
                "graph": {
                    "mode": "lineChart",
                    "height": 300,
                    "optionOpen": false,
                    "keys": [
                        {
                            "name": "date",
                            "index": 0,
                            "aggr": "sum"
                        }
                    ],
                    "values": [
                        {
                            "name": "feeling_level",
                            "index": 1,
                            "aggr": "sum"
                        }
                    ],
                    "groups": [],
                    "scatter": {
                        "xAxis": {
                            "name": "date",
                            "index": 0,
                            "aggr": "sum"
                        }
                    }
                },
                "enabled": true
            },
            "settings": {
                "params": {},
                "forms": {}
            },
            "jobName": "paragraph_1485173544518_-985404164",
            "id": "20170122-151725_1221079286",
            "dateCreated": "2017-01-23T12:12:24+0000",
            "status": "FINISHED",
            "errorMessage": "",
            "progressUpdateIntervalMs": 500,
            "$$hashKey": "object:163",
            "dateFinished": "2017-01-23T12:18:37+0000",
            "dateStarted": "2017-01-23T12:18:36+0000",
            "focus": true
        },
        {
            "text": "",
            "dateUpdated": "2017-01-23T12:12:24+0000",
            "config": {
                "colWidth": 12,
                "graph": {
                    "mode": "table",
                    "height": 300,
                    "optionOpen": false,
                    "keys": [],
                    "values": [],
                    "groups": [],
                    "scatter": {}
                },
                "enabled": true
            },
            "settings": {
                "params": {},
                "forms": {}
            },
            "jobName": "paragraph_1485173544519_-985788913",
            "id": "20170123-010952_240916926",
            "dateCreated": "2017-01-23T12:12:24+0000",
            "status": "READY",
            "errorMessage": "",
            "progressUpdateIntervalMs": 500,
            "$$hashKey": "object:165"
        }
    ],
    "name": "Twitter",
    "id": "2C8GWS7V3",
    "angularObjects": {
        "2C6V1PH56:shared_process": [],
        "2C6XY7V2A:shared_process": [],
        "2C67GNPTF:shared_process": [],
        "2C6QRKE7A:shared_process": [],
        "2C7G8AA7T:shared_process": [],
        "2C7VZR8NA:shared_process": [],
        "2C9G3G8SF:shared_process": [],
        "2C827SPCT:shared_process": [],
        "2C77JX7WM:shared_process": [],
        "2C7S99QP4:shared_process": [],
        "2CA3PA7VW:shared_process": [],
        "2C6MZQJYC:shared_process": [],
        "2C7M7MYHM:shared_process": [],
        "2C8R3BUZX:shared_process": [],
        "2C8RCF4HH:shared_process": [],
        "2C82SBT3A:shared_process": [],
        "2C9YAM1C9:shared_process": [],
        "2C859DUS2:shared_process": []
    },
    "config": {
        "looknfeel": "default"
    },
    "info": {}
}